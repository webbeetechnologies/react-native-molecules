"use strict";(self.webpackChunkmolecules_docs_v2=self.webpackChunkmolecules_docs_v2||[]).push([[1888],{2457:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>d,contentTitle:()=>a,default:()=>x,frontMatter:()=>i,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"context-bridge","title":"ContextBridge","description":"Bridge React contexts across render boundaries, enabling context access in portals and other cross-render scenarios.","source":"@site/docs/context-bridge.mdx","sourceDirName":".","slug":"/context-bridge","permalink":"/react-native-molecules/docs/context-bridge","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/context-bridge.mdx","tags":[],"version":"current","sidebarPosition":46,"frontMatter":{"title":"ContextBridge","description":"Bridge React contexts across render boundaries, enabling context access in portals and other cross-render scenarios.","sidebar_position":46,"sidebar_custom_props":{"icon":"material:link"}},"sidebar":"componentSidebar","previous":{"title":"FastContext","permalink":"/react-native-molecules/docs/fast-context"}}');var o=n(2540),s=n(3023);const i={title:"ContextBridge",description:"Bridge React contexts across render boundaries, enabling context access in portals and other cross-render scenarios.",sidebar_position:46,sidebar_custom_props:{icon:"material:link"}},a="ContextBridge",d={},c=[{value:"Key Features",id:"key-features",level:2},{value:"API",id:"api",level:2},{value:"<code>createContextBridge&lt;T&gt;(bridgeName, Wrapper, contexts?)</code>",id:"createcontextbridgetbridgename-wrapper-contexts",level:3},{value:"Examples",id:"examples",level:2},{value:"Basic Usage with Portal",id:"basic-usage-with-portal",level:3},{value:"Registering Multiple Contexts",id:"registering-multiple-contexts",level:3},{value:"Integration with FastContext",id:"integration-with-fastcontext",level:3},{value:"Custom Wrapper Component",id:"custom-wrapper-component",level:3},{value:"How It Works",id:"how-it-works",level:2},{value:"When to Use",id:"when-to-use",level:2},{value:"Common Patterns",id:"common-patterns",level:2},{value:"Portal with Context Bridge",id:"portal-with-context-bridge",level:3},{value:"Notes",id:"notes",level:2}];function l(e){const t={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(t.header,{children:(0,o.jsx)(t.h1,{id:"contextbridge",children:"ContextBridge"})}),"\n",(0,o.jsx)(t.p,{children:"ContextBridge is a utility that allows you to bridge React contexts across render boundaries. This is particularly useful when using portals, modals, or other scenarios where components are rendered outside the normal React tree but still need access to context values."}),"\n",(0,o.jsx)(t.h2,{id:"key-features",children:"Key Features"}),"\n",(0,o.jsxs)(t.ul,{children:["\n",(0,o.jsxs)(t.li,{children:[(0,o.jsx)(t.strong,{children:"Cross-render context access"}),": Access contexts even when components are rendered outside the normal tree"]}),"\n",(0,o.jsxs)(t.li,{children:[(0,o.jsx)(t.strong,{children:"Dynamic context registration"}),": Register contexts to be bridged at runtime"]}),"\n",(0,o.jsxs)(t.li,{children:[(0,o.jsx)(t.strong,{children:"Portal integration"}),": Seamlessly works with portals and other render boundary scenarios"]}),"\n",(0,o.jsxs)(t.li,{children:[(0,o.jsx)(t.strong,{children:"Type-safe"}),": Full TypeScript support"]}),"\n"]}),"\n",(0,o.jsx)(t.h2,{id:"api",children:"API"}),"\n",(0,o.jsx)(t.h3,{id:"createcontextbridgetbridgename-wrapper-contexts",children:(0,o.jsx)(t.code,{children:"createContextBridge<T>(bridgeName, Wrapper, contexts?)"})}),"\n",(0,o.jsx)(t.p,{children:"Creates a new context bridge."}),"\n",(0,o.jsx)(t.p,{children:(0,o.jsx)(t.strong,{children:"Parameters:"})}),"\n",(0,o.jsxs)(t.ul,{children:["\n",(0,o.jsxs)(t.li,{children:[(0,o.jsx)(t.code,{children:"bridgeName"}),": Unique name for the bridge (used for registration)"]}),"\n",(0,o.jsxs)(t.li,{children:[(0,o.jsx)(t.code,{children:"Wrapper"}),": Component that will wrap the bridged content (e.g., Portal)"]}),"\n",(0,o.jsxs)(t.li,{children:[(0,o.jsx)(t.code,{children:"contexts"})," (optional): Array of contexts to bridge by default"]}),"\n"]}),"\n",(0,o.jsx)(t.p,{children:(0,o.jsx)(t.strong,{children:"Returns:"})}),"\n",(0,o.jsxs)(t.ul,{children:["\n",(0,o.jsxs)(t.li,{children:[(0,o.jsx)(t.code,{children:"registerContextToBridge"}),": Function to register additional contexts"]}),"\n",(0,o.jsxs)(t.li,{children:[(0,o.jsx)(t.code,{children:"BridgedComponent"}),": Component that bridges contexts to its children"]}),"\n"]}),"\n",(0,o.jsx)(t.h2,{id:"examples",children:"Examples"}),"\n",(0,o.jsx)(t.h3,{id:"basic-usage-with-portal",children:"Basic Usage with Portal"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-tsx",children:"import { createContextBridge } from 'react-native-molecules/context-bridge';\nimport { Portal as GorhomPortal } from '@gorhom/portal';\nimport { createContext } from 'react';\n\n// Create a context\nconst ThemeContext = createContext('light');\n\n// Create a bridge for Portal\nconst { BridgedComponent: Portal, registerContextToBridge } = createContextBridge(\n    'portal-context',\n    GorhomPortal,\n    [ThemeContext] // Optional: contexts to bridge by default\n);\n\n// Register additional contexts if needed\nconst UserContext = createContext(null);\nregisterContextToBridge(UserContext);\n\n// Usage\nexport const App = () => {\n    return (\n        <ThemeContext.Provider value=\"dark\">\n            <UserContext.Provider value={{ name: 'John' }}>\n                <View>\n                    <Text>Main content</Text>\n                    <Portal>\n                        {/* This content can access ThemeContext and UserContext */}\n                        <ThemedComponent />\n                    </Portal>\n                </View>\n            </UserContext.Provider>\n        </ThemeContext.Provider>\n    );\n};\n\nconst ThemedComponent = () => {\n    const theme = useContext(ThemeContext);\n    const user = useContext(UserContext);\n    \n    return (\n        <View>\n            <Text>Theme: {theme}</Text>\n            <Text>User: {user?.name}</Text>\n        </View>\n    );\n};\n"})}),"\n",(0,o.jsx)(t.h3,{id:"registering-multiple-contexts",children:"Registering Multiple Contexts"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-tsx",children:"import { createContextBridge } from 'react-native-molecules/context-bridge';\n\nconst ThemeContext = createContext('light');\nconst LanguageContext = createContext('en');\nconst UserContext = createContext(null);\n\nconst { registerContextToBridge, BridgedComponent } = createContextBridge(\n    'my-bridge',\n    MyWrapper\n);\n\n// Register multiple contexts at once\nregisterContextToBridge([ThemeContext, LanguageContext, UserContext]);\n\n// Or register them individually\nregisterContextToBridge(ThemeContext);\nregisterContextToBridge(LanguageContext);\nregisterContextToBridge(UserContext);\n"})}),"\n",(0,o.jsx)(t.h3,{id:"integration-with-fastcontext",children:"Integration with FastContext"}),"\n",(0,o.jsx)(t.p,{children:"ContextBridge works seamlessly with FastContext:"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-tsx",children:"import { createFastContext } from 'react-native-molecules/fast-context';\nimport { createContextBridge } from 'react-native-molecules/context-bridge';\n\ntype Store = {\n    count: number;\n    name: string;\n};\n\nconst { Provider, Context } = createFastContext<Store>();\n\nconst { registerContextToBridge, BridgedComponent } = createContextBridge(\n    'portal-bridge',\n    Portal\n);\n\n// Register the FastContext\nregisterContextToBridge(Context);\n\nexport const App = () => {\n    return (\n        <Provider value={{ count: 0, name: 'John' }}>\n            <BridgedComponent>\n                {/* Can access FastContext here */}\n                <ChildComponent />\n            </BridgedComponent>\n        </Provider>\n    );\n};\n"})}),"\n",(0,o.jsx)(t.h3,{id:"custom-wrapper-component",children:"Custom Wrapper Component"}),"\n",(0,o.jsx)(t.p,{children:"You can use any component as a wrapper:"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-tsx",children:"import { createContextBridge } from 'react-native-molecules/context-bridge';\n\nconst CustomWrapper = ({ children, name }) => {\n    return (\n        <View style={styles.wrapper}>\n            <Text>Wrapper: {name}</Text>\n            {children}\n        </View>\n    );\n};\n\nconst { BridgedComponent, registerContextToBridge } = createContextBridge(\n    'custom-bridge',\n    CustomWrapper\n);\n\nconst MyContext = createContext('value');\nregisterContextToBridge(MyContext);\n\nexport const App = () => {\n    return (\n        <MyContext.Provider value=\"bridged value\">\n            <BridgedComponent name=\"example\">\n                {/* Context is bridged here */}\n                <ChildComponent />\n            </BridgedComponent>\n        </MyContext.Provider>\n    );\n};\n"})}),"\n",(0,o.jsx)(t.h2,{id:"how-it-works",children:"How It Works"}),"\n",(0,o.jsxs)(t.ol,{children:["\n",(0,o.jsxs)(t.li,{children:[(0,o.jsx)(t.strong,{children:"Context Registration"}),": Contexts are registered to a bridge using ",(0,o.jsx)(t.code,{children:"registerContextToBridge"})]}),"\n",(0,o.jsxs)(t.li,{children:[(0,o.jsx)(t.strong,{children:"Value Capture"}),": When ",(0,o.jsx)(t.code,{children:"BridgedComponent"})," renders, it captures all context values from the parent tree"]}),"\n",(0,o.jsxs)(t.li,{children:[(0,o.jsx)(t.strong,{children:"Value Provision"}),": The captured values are provided to children through new Provider components"]}),"\n",(0,o.jsxs)(t.li,{children:[(0,o.jsx)(t.strong,{children:"Render Boundary"}),": The wrapper component (e.g., Portal) renders children in a different location, but contexts are preserved"]}),"\n"]}),"\n",(0,o.jsx)(t.h2,{id:"when-to-use",children:"When to Use"}),"\n",(0,o.jsxs)(t.ul,{children:["\n",(0,o.jsxs)(t.li,{children:[(0,o.jsx)(t.strong,{children:"Portals"}),": When using portals and need context access in portaled content"]}),"\n",(0,o.jsxs)(t.li,{children:[(0,o.jsx)(t.strong,{children:"Modals"}),": When modals need access to parent contexts"]}),"\n",(0,o.jsxs)(t.li,{children:[(0,o.jsx)(t.strong,{children:"Cross-render scenarios"}),": Any scenario where components are rendered outside the normal tree"]}),"\n",(0,o.jsxs)(t.li,{children:[(0,o.jsx)(t.strong,{children:"Dynamic context bridging"}),": When contexts need to be registered dynamically"]}),"\n"]}),"\n",(0,o.jsx)(t.h2,{id:"common-patterns",children:"Common Patterns"}),"\n",(0,o.jsx)(t.h3,{id:"portal-with-context-bridge",children:"Portal with Context Bridge"}),"\n",(0,o.jsx)(t.p,{children:"This is the most common use case - bridging contexts through portals:"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-tsx",children:"import { Portal } from 'react-native-molecules';\nimport { registerPortalContext } from 'react-native-molecules';\n\nconst MyContext = createContext('default');\n\n// Register context to be bridged through Portal\nregisterPortalContext(MyContext);\n\nexport const App = () => {\n    return (\n        <MyContext.Provider value=\"bridged\">\n            <Portal>\n                {/* Can access MyContext here */}\n                <Component />\n            </Portal>\n        </MyContext.Provider>\n    );\n};\n"})}),"\n",(0,o.jsx)(t.h2,{id:"notes",children:"Notes"}),"\n",(0,o.jsxs)(t.ul,{children:["\n",(0,o.jsxs)(t.li,{children:["Contexts must be registered before the ",(0,o.jsx)(t.code,{children:"BridgedComponent"})," is used"]}),"\n",(0,o.jsx)(t.li,{children:"The bridge captures context values at render time"}),"\n",(0,o.jsx)(t.li,{children:"Multiple contexts can be registered to the same bridge"}),"\n",(0,o.jsxs)(t.li,{children:["The wrapper component receives all props passed to ",(0,o.jsx)(t.code,{children:"BridgedComponent"})]}),"\n"]})]})}function x(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,o.jsx)(t,{...e,children:(0,o.jsx)(l,{...e})}):l(e)}}}]);